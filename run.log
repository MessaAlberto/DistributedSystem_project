Reusing configuration cache.
> Task :app:processResources UP-TO-DATE
> Task :app:compileJava UP-TO-DATE
> Task :app:classes UP-TO-DATE

> Task :app:run
[Main] === Mars Distributed Storage System ===
[Main] Configuration: N=3, R=2, W=2, TIMEOUT_SECONDS=5, INITIAL_NODES=5
[Main] ========================================

17:31:14.498 [MarsSystem-akka.actor.default-dispatcher-4] INFO akka.event.slf4j.Slf4jLogger - Slf4jLogger started
[TestManager] Iniitalizing 5 nodes...
[TestManager] All nodes initialized and joined the system.
[TestManager] Creating multiple clients...
[TestManager] Created client0 with access to 5 nodes.
[TestManager] Created client1 with access to 5 nodes.
[TestManager] Created client2 with access to 5 nodes.
[TestManager] 

[TestManager] =====================
[TestManager] === SYSTEM STATUS ===
[TestManager] Active nodes: 5
[TestManager] Crashed nodes: 0
[TestManager] Active node IDs: [0, 10, 20, 30, 40]
[TestManager] Client list: 3
[TestManager] Clients: [client0, client1, client2]
[TestManager] =====================
[Main] 
[Main] ============================================================
[Main] ====        Starting single-client basic test           ====
[Main] ============================================================
[Main] Storing key=25, value='HelloWorld'...
[client0] Sending WriteRequest key=25, value="HelloWorld" to Node20
[Node 20] Received WriteRequest for key=25 value="HelloWorld"
[Node 20] Notifying node 30 for WriteRequest: key=25 value="HelloWorld"
[Node 20] Notifying node 40 for WriteRequest: key=25 value="HelloWorld"
[Node 20] Notifying node 0 for WriteRequest: key=25 value="HelloWorld"
[Node 20] (Write) GetVersionWrite responses: 40=0
[Node 20] (Write) GetVersionWrite responses: 0=0, 40=0
[Node 20] Computed new version 1
[Node 0] Stored key=25 version=1 value="HelloWorld"
[Node 30] Stored key=25 version=1 value="HelloWorld"
[Node 40] Stored key=25 version=1 value="HelloWorld"
[client0] Received WriteResponse for key=25 value="HelloWorld" version=1
[client0] Sending response to manager: WRITE 25 HelloWorld success=true message=Write successful for key=25 version=1
[TestManager] Received client response: WRITE 25 HelloWorld success=true
[TestManager] Client request batch completed.
[Main] 
[Main] Press ENTER to continue...
[Main] 
[Main] Retrieving key=25...
[client0] Sending ReadRequest key=25 to Node20
[Node 20] Received ReadRequest for key=25
[Node 20] Notifying node 30 for ReadRequest: key=25 client=client0
[Node 20] Notifying node 40 for ReadRequest: key=25 client=client0
[Node 20] Notifying node 0 for ReadRequest: key=25 client=client0
[Node 20] Started read coordinator for key= (25 client0)
[Node 0] Replied GetVersionRead for key=25 v=1
[Node 30] Replied GetVersionRead for key=25 v=1
[Node 40] Replied GetVersionRead for key=25 v=1
[Node 20] (Read) GetVersionRead responses: 0=1
[Node 20] (Read) GetVersionRead responses: 0=1, 30=1
[Node 20] (Read) Returning value v=1 to client
[client0] Received ReadResponse for key=25 value="HelloWorld" version=1
[client0] Sending response to manager: READ 25 success=true message=Value="HelloWorld" version=1
[TestManager] Received client response: READ 25 success=true
[TestManager] Client request batch completed.
[Main] 
[Main] Press ENTER to continue...
[Main] 
[TestManager] 

[TestManager] === PRINTING STORE CONTENTS OF ALL ACTIVE NODES ===
[TestManager] === COMPLETED PRINTING STORE CONTENTS OF ALL ACTIVE NODES ===
[TestManager] Node 0:
[TestManager]   Key: 25 -> Value: "HelloWorld" (v1)
[TestManager] Node 10: (empty)
[TestManager] Node 20: (empty)
[TestManager] Node 30:
[TestManager]   Key: 25 -> Value: "HelloWorld" (v1)
[TestManager] Node 40:
[TestManager]   Key: 25 -> Value: "HelloWorld" (v1)
[TestManager] 

[TestManager] =====================
[TestManager] === SYSTEM STATUS ===
[TestManager] Active nodes: 5
[TestManager] Crashed nodes: 0
[TestManager] Active node IDs: [0, 10, 20, 30, 40]
[TestManager] Client list: 3
[TestManager] Clients: [client0, client1, client2]
[TestManager] =====================
[Main] 
[Main] ============================================================
[Main] ====         Single-client basic test completed.        ====
[Main] Summary:
[Main]   - Basic Write and Read operations verified.
[Main]   - Data consistency maintained across operations.
[Main] ============================================================

[Main] 
[Main] Press ENTER to continue...
[Main] 
[Main] 
[Main] ============================================================
[Main] ====              Starting node JOIN test                ====
[Main] ============================================================
[Main] Adding new node27 (JOIN)...
[TestManager] JOIN completed: Node 27 joined the system
[Node 27] Timeout armed for JOINING: waiting bootstrap peer response for JOIN
[Node 27] JOIN: requesting items from 30
[Node 27] Timeout armed for JOINING: waiting data transfer from successor 30
[Node 30] IDLE: sending 1 items to null
[Node 27] Timeout armed for JOINING: waiting maintenance reads quorum for 1 keys
[Node 30] Replied GetVersionRead for key=25 v=1
[Node 40] Replied GetVersionRead for key=25 v=1
[Node 0] Replied GetVersionRead for key=25 v=1
[Node 27] (Read) GetVersionRead responses: 30=1
[Node 27] (Read) GetVersionRead responses: 0=1, 30=1
[Node 27] JOIN completed (maintenance done) and serving.
[TestManager] JOIN completed: Node 27 joined the system
[TestManager] Action detail: Maintenance completed
[TestManager] Node action batch completed.
[Main] 
[Main] Press ENTER to continue...
[Main] 
[client1] Updated node list. Active targets: 6
[client0] Updated node list. Active targets: 6
[client2] Updated node list. Active targets: 6
[Node 30] AnnounceJoin: added 27 with backfill
[Node 10] AnnounceJoin: added 27 with backfill
[Node 40] AnnounceJoin: added 27 with backfill
[Node 20] AnnounceJoin: added 27 with backfill
[Node 0] Pruned key=25 (no longer responsible)
[Node 0] AnnounceJoin: added 27 with backfill
[TestManager] 

[TestManager] === PRINTING STORE CONTENTS OF ALL ACTIVE NODES ===
[TestManager] === COMPLETED PRINTING STORE CONTENTS OF ALL ACTIVE NODES ===
[TestManager] Node 0: (empty)
[TestManager] Node 10: (empty)
[TestManager] Node 20: (empty)
[TestManager] Node 27:
[TestManager]   Key: 25 -> Value: "HelloWorld" (v1)
[TestManager] Node 30:
[TestManager]   Key: 25 -> Value: "HelloWorld" (v1)
[TestManager] Node 40:
[TestManager]   Key: 25 -> Value: "HelloWorld" (v1)
[TestManager] 

[TestManager] =====================
[TestManager] === SYSTEM STATUS ===
[TestManager] Active nodes: 6
[TestManager] Crashed nodes: 0
[TestManager] Active node IDs: [0, 10, 20, 30, 40, 27]
[TestManager] Client list: 3
[TestManager] Clients: [client0, client1, client2]
[TestManager] =====================
[Main] 
============================================================
[Main] ====               Node JOIN test completed.            ====
[Main] Summary:
[Main]   - Node JOIN operation completed successfully.
[Main]   - System state is stable and ready for further tests.
[Main] ============================================================

[Main] 
[Main] Press ENTER to continue...
[Main] 
[Main] 
[Main] ============================================================
[Main] ====              Starting node LEAVE test               ====
[Main] ============================================================
[Main] Removing node30 (LEAVE)...
[Node 30] Received leave request
[TestManager] LEAVE completed: Node 30
[Node 30] TransferData to successor and leaving network
[TestManager] LEAVE completed: Node 30 left the system
[Main] 
[Main] Press ENTER to continue...
[Main] 
[TestManager] Node action batch completed.
[client1] Updated node list. Active targets: 5
[client2] Updated node list. Active targets: 5
[client0] Updated node list. Active targets: 5
[Node 40] Received transfer key=25 v=1
[Node 27] Received transfer key=25 v=1
[Node 40] AnnounceLeave: removed null
[Node 10] AnnounceLeave: removed null
[Node 0] Received transfer key=25 v=1
[Node 0] AnnounceLeave: removed null
[Node 20] AnnounceLeave: removed null
[Node 27] AnnounceLeave: removed null
[TestManager] 

[TestManager] === PRINTING STORE CONTENTS OF ALL ACTIVE NODES ===
[TestManager] === COMPLETED PRINTING STORE CONTENTS OF ALL ACTIVE NODES ===
[TestManager] Node 0:
[TestManager]   Key: 25 -> Value: "HelloWorld" (v1)
[TestManager] Node 10: (empty)
[TestManager] Node 20: (empty)
[TestManager] Node 27:
[TestManager]   Key: 25 -> Value: "HelloWorld" (v1)
[TestManager] Node 40:
[TestManager]   Key: 25 -> Value: "HelloWorld" (v1)
[TestManager] 

[TestManager] =====================
[TestManager] === SYSTEM STATUS ===
[TestManager] Active nodes: 5
[TestManager] Crashed nodes: 0
[TestManager] Active node IDs: [0, 10, 20, 40, 27]
[TestManager] Client list: 3
[TestManager] Clients: [client0, client1, client2]
[TestManager] =====================
[Main] 
============================================================
[Main] ====               Node LEAVE test completed.           ====
[Main] Summary:
[Main]   - Node LEAVE operation completed successfully.
[Main]   - System state is stable and ready for further tests.
[Main] ============================================================

[Main] 
[Main] Press ENTER to continue...
[Main] 
[Main] 
[Main] ============================================================
[Main] ====             Starting node CRASH test                ====
[Main] ============================================================
[Main] Crashing node40...
[TestManager] CRASH completed: Node 40
[Node 40] Crashing node
[TestManager] CRASH completed: Node 40 crashed
[TestManager] Node action batch completed.
[client1] Updated node list. Active targets: 4
[Main] 
[Main] Press ENTER to continue...
[Main] 
[client0] Updated node list. Active targets: 4
[client2] Updated node list. Active targets: 4
[TestManager] 

[TestManager] === PRINTING STORE CONTENTS OF ALL ACTIVE NODES ===
[TestManager] === COMPLETED PRINTING STORE CONTENTS OF ALL ACTIVE NODES ===
[TestManager] Node 0:
[TestManager]   Key: 25 -> Value: "HelloWorld" (v1)
[TestManager] Node 10: (empty)
[TestManager] Node 20: (empty)
[TestManager] Node 27:
[TestManager]   Key: 25 -> Value: "HelloWorld" (v1)
[TestManager] 

[TestManager] =====================
[TestManager] === SYSTEM STATUS ===
[TestManager] Active nodes: 4
[TestManager] Crashed nodes: 1
[TestManager] Active node IDs: [0, 10, 20, 27]
[TestManager] Crashed node IDs: [40]
[TestManager] Client list: 3
[TestManager] Clients: [client0, client1, client2]
[TestManager] =====================
[Main] 
============================================================
[Main] ====              Node CRASH test completed.            ====
[Main] Summary:
[Main]   - Node CRASH operation completed successfully.
[Main]   - System state is stable and ready for further tests.
[Main] ============================================================

[Main] 
[Main] Press ENTER to continue...
[Main] 
[Main] 
[Main] ============================================================
[Main] ====           Starting node RECOVER test               ====
[Main] ============================================================
[Main] Recovering node40...
[TestManager] RECOVER completed: Node 40
[Node 40] Starting RECOVERY via testManager
[Node 40] Timeout armed for RECOVERING: waiting bootstrap peer response for RECOVER
[Node 40] RECOVER: requesting items from successor 0
[Node 40] RECOVER: requesting items from predecessor 27
[Node 40] Timeout armed for RECOVERING: waiting data transfer from successor 0, predecessor 27
[Node 27] IDLE: sending 1 items to 40
[Node 0] IDLE: sending 1 items to 40
[Node 40] Timeout armed for RECOVERING: waiting data transfer from successor 0
[Node 40] RECOVER: waiting for more responses (1/2)
[Node 40] Timeout armed for RECOVERING: waiting maintenance reads quorum for 1 keys
[Node 27] Replied GetVersionRead for key=25 v=1
17:32:19.904 [MarsSystem-akka.actor.default-dispatcher-8] INFO akka.actor.RepointableActorRef - Message [it.unitn.Node$GetVersionRead] from Actor[akka://MarsSystem/user/Node40#-815806250] to Actor[akka://MarsSystem/user/Node40#-815806250] was unhandled. [1] dead letters encountered. This logging can be turned off or adjusted with configuration settings 'akka.log-dead-letters' and 'akka.log-dead-letters-during-shutdown'.
[Node 0] Replied GetVersionRead for key=25 v=1
[Node 40] (Read) GetVersionRead responses: 27=1
[Node 40] (Read) GetVersionRead responses: 0=1, 27=1
[Node 40] RECOVERY completed (maintenance done) and serving.
[TestManager] RECOVER completed: Node 40 recovered
[TestManager] Action detail: Maintenance completed
[client0] Updated node list. Active targets: 5
[Main] 
[Main] Press ENTER to continue...
[Main] 
[TestManager] Node action batch completed.
[client2] Updated node list. Active targets: 5
[client1] Updated node list. Active targets: 5
[TestManager] 

[TestManager] === PRINTING STORE CONTENTS OF ALL ACTIVE NODES ===
[TestManager] === COMPLETED PRINTING STORE CONTENTS OF ALL ACTIVE NODES ===
[TestManager] Node 0:
[TestManager]   Key: 25 -> Value: "HelloWorld" (v1)
[TestManager] Node 10: (empty)
[TestManager] Node 20: (empty)
[TestManager] Node 27:
[TestManager]   Key: 25 -> Value: "HelloWorld" (v1)
[TestManager] Node 40:
[TestManager]   Key: 25 -> Value: "HelloWorld" (v1)
[TestManager] 

[TestManager] =====================
[TestManager] === SYSTEM STATUS ===
[TestManager] Active nodes: 5
[TestManager] Crashed nodes: 0
[TestManager] Active node IDs: [0, 10, 20, 27, 40]
[TestManager] Client list: 3
[TestManager] Clients: [client0, client1, client2]
[TestManager] =====================
[Main] 
============================================================
[Main] ====             Node RECOVER test completed.          ====
[Main] Summary:
[Main]   - Node RECOVER operation completed successfully.
[Main]   - System state is stable and ready for further tests.
[Main] ============================================================

[Main] 
[Main] Press ENTER to continue...
[Main] 
[Main] 
[Main] ============================================================
[Main] ====     Starting Sequential Consistency test           ====
[Main] ============================================================
[Main] Client2 writing key=65, value='First' asking node20...
[client2] Sending WriteRequest key=65, value="First" to Node20
[Node 20] Received WriteRequest for key=65 value="First"
[Node 20] Notifying node 0 for WriteRequest: key=65 value="First"
[Node 20] Notifying node 10 for WriteRequest: key=65 value="First"
[Node 20] Notifying node 20 for WriteRequest: key=65 value="First"
[Node 20] (Write) GetVersionWrite responses: 20=0
[Node 20] (Write) GetVersionWrite responses: 10=0, 20=0
[Node 20] Computed new version 1
[Node 10] Stored key=65 version=1 value="First"
[Node 0] Stored key=65 version=1 value="First"
[client2] Received WriteResponse for key=65 value="First" version=1
[client2] Sending response to manager: WRITE 65 First success=true message=Write successful for key=65 version=1
[TestManager] Received client response: WRITE 65 First success=true
[TestManager] Client request batch completed.
[Main] 
[Main] Press ENTER to continue...
[Main] 
[Node 20] Stored key=65 version=1 value="First"
[Main] Client0 writes key=65, value='Second' asking node27...
[client0] Sending WriteRequest key=65, value="Second" to Node27
[Node 27] Received WriteRequest for key=65 value="Second"
[Node 27] Notifying node 0 for WriteRequest: key=65 value="Second"
[Node 27] Notifying node 10 for WriteRequest: key=65 value="Second"
[Node 27] Notifying node 20 for WriteRequest: key=65 value="Second"
[Node 27] (Write) GetVersionWrite responses: 10=1
[Node 27] (Write) GetVersionWrite responses: 0=1, 10=1
[Node 27] Computed new version 2
[Node 20] Stored key=65 version=2 value="Second"
[Node 0] Stored key=65 version=2 value="Second"
[Node 10] Stored key=65 version=2 value="Second"
[client0] Received WriteResponse for key=65 value="Second" version=2
[client0] Sending response to manager: WRITE 65 Second success=true message=Write successful for key=65 version=2
[TestManager] Received client response: WRITE 65 Second success=true
[TestManager] Client request batch completed.
[Main] 
[Main] Press ENTER to continue...
[Main] 
[Main] Client1 reads key=65 (should see 'Second') asking node 40...
[client1] Sending ReadRequest key=65 to Node40
[Node 40] Received ReadRequest for key=65
[Node 40] Notifying node 0 for ReadRequest: key=65 client=client1
[Node 40] Notifying node 10 for ReadRequest: key=65 client=client1
[Node 40] Notifying node 20 for ReadRequest: key=65 client=client1
[Node 40] Started read coordinator for key= (65 client1)
[Node 0] Replied GetVersionRead for key=65 v=2
[Node 20] Replied GetVersionRead for key=65 v=2
[Node 10] Replied GetVersionRead for key=65 v=2
[Node 40] (Read) GetVersionRead responses: 0=2
[Node 40] (Read) GetVersionRead responses: 0=2, 20=2
[Node 40] (Read) Returning value v=2 to client
[client1] Received ReadResponse for key=65 value="Second" version=2
[client1] Sending response to manager: READ 65 success=true message=Value="Second" version=2
[TestManager] Received client response: READ 65 success=true
[TestManager] Client request batch completed.
[TestManager] 

[TestManager] === PRINTING STORE CONTENTS OF ALL ACTIVE NODES ===
[TestManager] === COMPLETED PRINTING STORE CONTENTS OF ALL ACTIVE NODES ===
[TestManager] Node 0:
[TestManager]   Key: 65 -> Value: "Second" (v2)
[TestManager]   Key: 25 -> Value: "HelloWorld" (v1)
[TestManager] Node 10:
[TestManager]   Key: 65 -> Value: "Second" (v2)
[TestManager] Node 20:
[TestManager]   Key: 65 -> Value: "Second" (v2)
[TestManager] Node 27:
[TestManager]   Key: 25 -> Value: "HelloWorld" (v1)
[TestManager] Node 40:
[TestManager]   Key: 25 -> Value: "HelloWorld" (v1)
[TestManager] 

[TestManager] =====================
[TestManager] === SYSTEM STATUS ===
[TestManager] Active nodes: 5
[TestManager] Crashed nodes: 0
[TestManager] Active node IDs: [0, 10, 20, 27, 40]
[TestManager] Client list: 3
[TestManager] Clients: [client0, client1, client2]
[TestManager] =====================
[Main] 
[Main] ============================================================
[Main] ====      Sequential Consistency test completed.       ====
[Main] Summary:
[Main]   - Sequential consistency verified across clients.
[Main]   - Data integrity maintained during operations.
[Main] ============================================================

[Main] 
[Main] Press ENTER to continue...
[Main] 
[Main] 
[Main] ============================================================
[Main] ====     Starting Recover Lost Writes test              ====
[Main] ============================================================
[Main] Node10 crashing...
[TestManager] CRASH completed: Node 10
[Node 10] Crashing node
[TestManager] CRASH completed: Node 10 crashed
[TestManager] Node action batch completed.
[client0] Updated node list. Active targets: 4
[client2] Updated node list. Active targets: 4
[client1] Updated node list. Active targets: 4
[Main] 
[Main] Press ENTER to continue...
[Main] 
[Main] Client2 writing key=65, value='Third' asking node40...
[client2] Sending WriteRequest key=65, value="Third" to Node40
[Node 40] Received WriteRequest for key=65 value="Third"
[Node 40] Notifying node 0 for WriteRequest: key=65 value="Third"
[Node 40] Notifying node 10 for WriteRequest: key=65 value="Third"
[Node 40] Notifying node 20 for WriteRequest: key=65 value="Third"
[Node 40] (Write) GetVersionWrite responses: 20=2
[Node 40] (Write) GetVersionWrite responses: 0=2, 20=2
[Node 40] Computed new version 3
[Node 0] Stored key=65 version=3 value="Third"
[Node 20] Stored key=65 version=3 value="Third"
[client2] Received WriteResponse for key=65 value="Third" version=3
[client2] Sending response to manager: WRITE 65 Third success=true message=Write successful for key=65 version=3
[TestManager] Received client response: WRITE 65 Third success=true
[TestManager] Client request batch completed.
[Main] 
[Main] Press ENTER to continue...
[Main] 
[Main] Node10 reovering...
[TestManager] RECOVER completed: Node 10
[Node 10] Starting RECOVERY via testManager
[Node 10] Timeout armed for RECOVERING: waiting bootstrap peer response for RECOVER
[Node 10] RECOVER: requesting items from successor 20
[Node 10] RECOVER: requesting items from predecessor 0
[Node 10] Timeout armed for RECOVERING: waiting data transfer from successor 20, predecessor 0
[Node 20] IDLE: sending 1 items to 10
[Node 0] IDLE: sending 1 items to 10
[Node 10] Timeout armed for RECOVERING: waiting data transfer from predecessor 0
[Node 10] RECOVER: waiting for more responses (1/2)
[Node 10] Timeout armed for RECOVERING: waiting maintenance reads quorum for 1 keys
17:32:56.721 [MarsSystem-akka.actor.default-dispatcher-7] INFO akka.actor.RepointableActorRef - Message [it.unitn.Node$GetVersionRead] from Actor[akka://MarsSystem/user/Node10#337647744] to Actor[akka://MarsSystem/user/Node10#337647744] was unhandled. [2] dead letters encountered. This logging can be turned off or adjusted with configuration settings 'akka.log-dead-letters' and 'akka.log-dead-letters-during-shutdown'.
[Node 0] Replied GetVersionRead for key=65 v=3
[Node 20] Replied GetVersionRead for key=65 v=3
[Node 10] (Read) GetVersionRead responses: 20=3
[Node 10] (Read) GetVersionRead responses: 0=3, 20=3
[Node 10] RECOVERY completed (maintenance done) and serving.
[TestManager] RECOVER completed: Node 10 recovered
[TestManager] Action detail: Maintenance completed
[TestManager] Node action batch completed.
[Main] 
[Main] Press ENTER to continue...
[client0] Updated node list. Active targets: 5
[client1] Updated node list. Active targets: 5
[Main] 
[client2] Updated node list. Active targets: 5
[Main] Client0 reads key=65 (should see 'Third') asking node27...
[client0] Sending ReadRequest key=65 to Node27
[Node 27] Received ReadRequest for key=65
[Node 27] Notifying node 0 for ReadRequest: key=65 client=client0
[Node 27] Notifying node 10 for ReadRequest: key=65 client=client0
[Node 27] Notifying node 20 for ReadRequest: key=65 client=client0
[Node 27] Started read coordinator for key= (65 client0)
[Node 0] Replied GetVersionRead for key=65 v=3
[Node 10] Replied GetVersionRead for key=65 v=3
[Node 20] Replied GetVersionRead for key=65 v=3
[Node 27] (Read) GetVersionRead responses: 20=3
[Node 27] (Read) GetVersionRead responses: 0=3, 20=3
[Node 27] (Read) Returning value v=3 to client
[client0] Received ReadResponse for key=65 value="Third" version=3
[client0] Sending response to manager: READ 65 success=true message=Value="Third" version=3
[TestManager] Received client response: READ 65 success=true
[TestManager] Client request batch completed.
[Main] 
[Main] Press ENTER to continue...
[Main] 
[TestManager] 

[TestManager] === PRINTING STORE CONTENTS OF ALL ACTIVE NODES ===
[TestManager] === COMPLETED PRINTING STORE CONTENTS OF ALL ACTIVE NODES ===
[TestManager] Node 0:
[TestManager]   Key: 65 -> Value: "Third" (v3)
[TestManager]   Key: 25 -> Value: "HelloWorld" (v1)
[TestManager] Node 10:
[TestManager]   Key: 65 -> Value: "Third" (v3)
[TestManager] Node 20:
[TestManager]   Key: 65 -> Value: "Third" (v3)
[TestManager] Node 27:
[TestManager]   Key: 25 -> Value: "HelloWorld" (v1)
[TestManager] Node 40:
[TestManager]   Key: 25 -> Value: "HelloWorld" (v1)
[TestManager] 

[TestManager] =====================
[TestManager] === SYSTEM STATUS ===
[TestManager] Active nodes: 5
[TestManager] Crashed nodes: 0
[TestManager] Active node IDs: [0, 20, 27, 40, 10]
[TestManager] Client list: 3
[TestManager] Clients: [client0, client1, client2]
[TestManager] =====================
[Main] 
[Main] ============================================================
[Main] ====      Recover Lost Writes test completed.          ====
[Main] Summary:
[Main]   - Lost writes successfully recovered after node recovery.
[Main]   - Data consistency verified across the system.
[Main] ============================================================

[Main] 
[Main] Press ENTER to continue...
[Main] 
[Main] 
[Main] ============================================================
[Main] ====        Starting Read Missing Key test             ====
[Main] ============================================================
[Main] Client1 reading non-existent key=999 asking node50...
[client1] Sending ReadRequest key=999 to Node20
[Node 20] Received ReadRequest for key=999
[Node 20] Notifying node 0 for ReadRequest: key=999 client=client1
[Node 20] Notifying node 10 for ReadRequest: key=999 client=client1
[Node 20] Notifying node 20 for ReadRequest: key=999 client=client1
[Node 20] Started read coordinator for key= (999 client1)
[Node 0] Replied GetVersionRead for key=999 v=0
[Node 20] Replied GetVersionRead for key=999 v=0
[Node 20] (Read) GetVersionRead responses: 20=0
[Node 10] Replied GetVersionRead for key=999 v=0
[Node 20] (Read) GetVersionRead responses: 0=0, 20=0
[Node 20] (Read) Key=999 not found (all versions 0)
[client1] Sending response to manager: WRITE 999 null success=false message=Operation failed: Key not found
[TestManager] Received client response: WRITE 999 null success=false
[TestManager] Pending client requests remain, batch not yet complete.
[Main] 
[Main] Press ENTER to continue...
[Main] 
[TestManager] 

[TestManager] === PRINTING STORE CONTENTS OF ALL ACTIVE NODES ===
[TestManager] === COMPLETED PRINTING STORE CONTENTS OF ALL ACTIVE NODES ===
[TestManager] Node 0:
[TestManager]   Key: 65 -> Value: "Third" (v3)
[TestManager]   Key: 25 -> Value: "HelloWorld" (v1)
[TestManager] Node 10:
[TestManager]   Key: 65 -> Value: "Third" (v3)
[TestManager] Node 20:
[TestManager]   Key: 65 -> Value: "Third" (v3)
[TestManager] Node 27:
[TestManager]   Key: 25 -> Value: "HelloWorld" (v1)
[TestManager] Node 40:
[TestManager]   Key: 25 -> Value: "HelloWorld" (v1)
[TestManager] 

[TestManager] =====================
[TestManager] === SYSTEM STATUS ===
[TestManager] Active nodes: 5
[TestManager] Crashed nodes: 0
[TestManager] Active node IDs: [0, 20, 27, 40, 10]
[TestManager] Client list: 3
[TestManager] Clients: [client0, client1, client2]
[TestManager] =====================
[Main] 
[Main] ============================================================
[Main] ====        Read Missing Key test completed.             ====
[Main] Summary:
[Main]   - Read operation on non-existent key handled gracefully.
[Main]   - System state remains consistent.
[Main] ============================================================

[Main] 
[Main] Press ENTER to continue...
[Main] 
[Main] 
[Main] ============================================================
[Main] ====     Starting Concurrent Writes Same Key test      ====
[Main] ============================================================
[Main] Client2 writing key=18, value='Alpha' asking node0...
[Main] Client0 writing key=18, value='Beta' asking node40...
[client2] Sending WriteRequest key=18, value="Alpha" to Node0
[client0] Sending WriteRequest key=18, value="Beta" to Node40
[Node 0] Received WriteRequest for key=18 value="Alpha"
[Node 40] Received WriteRequest for key=18 value="Beta"
[Node 0] Notifying node 20 for WriteRequest: key=18 value="Alpha"
[Node 40] Notifying node 20 for WriteRequest: key=18 value="Beta"
[Node 0] Notifying node 27 for WriteRequest: key=18 value="Alpha"
[Node 40] Notifying node 27 for WriteRequest: key=18 value="Beta"
[Node 0] Notifying node 40 for WriteRequest: key=18 value="Alpha"
[Node 40] Notifying node 40 for WriteRequest: key=18 value="Beta"
[Node 40] Rejected GetVersionWrite from Coord: Node0 for key=18 due to ongoing write
[Node 20] Rejected GetVersionWrite from Coord: Node0 for key=18 due to ongoing write
[Node 27] Rejected GetVersionWrite from Coord: Node40 for key=18 due to ongoing write
[Node 40] (Write) GetVersionWrite responses: 40=0
[Node 40] (Write) GetVersionWrite responses: 20=0, 40=0
[Node 40] Computed new version 1
[Node 0] (Write) GetVersionWrite responses: 27=0
[Node 0] Coord: Ignored VersionWriteResponse from Node40 for key=18 due to ongoing write
[client0] Received WriteResponse for key=18 value="Beta" version=1
[client0] Sending response to manager: WRITE 18 Beta success=true message=Write successful for key=18 version=1
[TestManager] Received client response: WRITE 18 Beta success=true
[TestManager] Pending client requests remain, batch not yet complete.
[Node 40] Stored key=18 version=1 value="Beta"
[Node 0] Coord: Ignored VersionWriteResponse from Node20 for key=18 due to ongoing write
[Node 40] Coord: Ignored VersionWriteResponse from Node27 for key=18 due to ongoing write
[Node 20] Stored key=18 version=1 value="Beta"
[Node 27] Rejected UpdateValue for key=18 due to lock held by another node
[client1] Sending response to manager: READ 999 success=false message=Timeout waiting for response. Node may be unresponsive (crashed).
[TestManager] Received client response: READ 999 success=false
[TestManager] Pending client requests remain, batch not yet complete.
[Main] 
[Main] Press ENTER to continue...
[Main] 
[Main] Client2 reading key=18 asking node27...
[client2] Sending ReadRequest key=18 to Node27
[Node 27] Received ReadRequest for key=18
[Node 27] Rejected ReadRequest for key=18 due to ongoing write
[client2] Sending response to manager: WRITE 18 null success=false message=Operation failed: Another write in progress for this key
[TestManager] Received client response: WRITE 18 null success=false
[TestManager] Pending client requests remain, batch not yet complete.
[TestManager] 

[TestManager] === PRINTING STORE CONTENTS OF ALL ACTIVE NODES ===
[Node 0] WriteTimeout: Write quorum W=2 not reached for key 18 (client=client2)
[TestManager] === COMPLETED PRINTING STORE CONTENTS OF ALL ACTIVE NODES ===
[TestManager] Node 0:
[TestManager]   Key: 65 -> Value: "Third" (v3)
[TestManager]   Key: 25 -> Value: "HelloWorld" (v1)
[TestManager] Node 10:
[TestManager]   Key: 65 -> Value: "Third" (v3)
[TestManager] Node 20:
[TestManager]   Key: 65 -> Value: "Third" (v3)
[TestManager]   Key: 18 -> Value: "Beta" (v1)
[TestManager] Node 27:
[TestManager]   Key: 25 -> Value: "HelloWorld" (v1)
[TestManager] Node 40:
[TestManager]   Key: 18 -> Value: "Beta" (v1)
[TestManager]   Key: 25 -> Value: "HelloWorld" (v1)
[TestManager] 

[TestManager] =====================
[TestManager] === SYSTEM STATUS ===
[TestManager] Active nodes: 5
[TestManager] Crashed nodes: 0
[TestManager] Active node IDs: [0, 20, 27, 40, 10]
[TestManager] Client list: 3
[TestManager] Clients: [client0, client1, client2]
[TestManager] =====================
[client2] Sending response to manager: WRITE 18 Alpha success=false message=Operation failed: Write quorum W=2 not reached for key 18 (client=client2)
[TestManager] Received client response: WRITE 18 Alpha success=false
[TestManager] Pending client requests remain, batch not yet complete.
[Main] 
[Main] ============================================================
[Main] ====   Concurrent Writes Same Key test completed.      ====
[Main] Summary:
[Main]   - Concurrent writes to the same key handled correctly.
[Main]   - Data consistency maintained across operations.
[Main] ============================================================

[Main] 
[Main] Press ENTER to continue...
[Main] 
[client2] Sending response to manager: READ 18 success=false message=Timeout waiting for response. Node may be unresponsive (crashed).
[TestManager] Received client response: READ 18 success=false
[TestManager] Client request batch completed.
[Main] 
[Main] ============================================================
[Main] ====     Starting Request During Node Action test       ====
[Main] ============================================================
[Main] Join node70...
[Main] While join is in progress, Client1 writes key=33, value='Delta' asking node20...
[TestManager] JOIN completed: Node 70 joined the system
[Node 70] Timeout armed for JOINING: waiting bootstrap peer response for JOIN
[Node 70] JOIN: requesting items from 0
[Node 70] Timeout armed for JOINING: waiting data transfer from successor 0
[Node 0] IDLE: sending 2 items to null
[Node 70] Timeout armed for JOINING: waiting maintenance reads quorum for 2 keys
[Node 40] Replied GetVersionRead for key=25 v=1
[Node 27] Replied GetVersionRead for key=25 v=1
[Node 0] Replied GetVersionRead for key=25 v=1
[Node 20] Replied GetVersionRead for key=65 v=3
[Node 0] Replied GetVersionRead for key=65 v=3
[Node 10] Replied GetVersionRead for key=65 v=3
[Node 70] (Read) GetVersionRead responses: 27=1
[Node 70] (Read) GetVersionRead responses: 27=1, 40=1
[Node 70] (Read) GetVersionRead responses: 20=3
[Node 70] (Read) GetVersionRead responses: 0=3, 20=3
[TestManager] JOIN completed: Node 70 joined the system
[TestManager] Action detail: Maintenance completed
[Node 70] JOIN completed (maintenance done) and serving.
[TestManager] Node action batch completed.
[client0] Updated node list. Active targets: 6
[client2] Updated node list. Active targets: 6
[Main] 
[Main] Press ENTER to continue...
[Main] 
[client1] Updated node list. Active targets: 6
[Node 27] AnnounceJoin: added 70 with backfill
[Node 0] Pruned key=25 (no longer responsible)
[Node 0] AnnounceJoin: added 70 with backfill
[Node 20] Pruned key=65 (no longer responsible)
[Node 20] AnnounceJoin: added 70 with backfill
[Node 10] AnnounceJoin: added 70 with backfill
[Node 40] AnnounceJoin: added 70 with backfill
[TestManager] 

[TestManager] === PRINTING STORE CONTENTS OF ALL ACTIVE NODES ===
[TestManager] === COMPLETED PRINTING STORE CONTENTS OF ALL ACTIVE NODES ===
[TestManager] Node 0:
[TestManager]   Key: 65 -> Value: "Third" (v3)
[TestManager] Node 10:
[TestManager]   Key: 65 -> Value: "Third" (v3)
[TestManager] Node 20:
[TestManager]   Key: 18 -> Value: "Beta" (v1)
[TestManager] Node 27:
[TestManager]   Key: 25 -> Value: "HelloWorld" (v1)
[TestManager] Node 40:
[TestManager]   Key: 18 -> Value: "Beta" (v1)
[TestManager]   Key: 25 -> Value: "HelloWorld" (v1)
[TestManager] Node 70:
[TestManager]   Key: 65 -> Value: "Third" (v3)
[TestManager]   Key: 25 -> Value: "HelloWorld" (v1)
[TestManager] 

[TestManager] =====================
[TestManager] === SYSTEM STATUS ===
[TestManager] Active nodes: 6
[TestManager] Crashed nodes: 0
[TestManager] Active node IDs: [0, 20, 27, 40, 10, 70]
[TestManager] Client list: 3
[TestManager] Clients: [client0, client1, client2]
[TestManager] =====================
[Main] 
[Main] ============================================================
[Main] ====   Request During Node Action test completed.       ====
[Main] Summary:
[Main]   - Requests during node actions handled appropriately.
[Main]   - System stability maintained.
[Main] ============================================================

[Main] 
[Main] Press ENTER to continue...
[Main] 
[Main] 
[Main] ============================================================
[Main] ====     Starting Node Action During Request test       ====
[Main] ============================================================
[Main] Client2 reads key=18 asking node10...
[Main] While request is pending, crash node10...
[client2] Sending ReadRequest key=18 to Node10
[Node 10] Received ReadRequest for key=18
[Node 10] Notifying node 20 for ReadRequest: key=18 client=client2
[Node 10] Notifying node 27 for ReadRequest: key=18 client=client2
[Node 10] Notifying node 40 for ReadRequest: key=18 client=client2
[Node 10] Started read coordinator for key= (18 client2)
[Node 40] Replied GetVersionRead for key=18 v=1
[Node 20] Replied GetVersionRead for key=18 v=1
[Node 10] (Read) GetVersionRead responses: 20=1
[Node 27] Rejected GetVersionRead for key=18 due to ongoing write
[Node 10] Coord: Ignored VersionReadResponse for key=18 due to ongoing write
[Node 10] (Read) GetVersionRead responses: 20=1, 40=1
[Node 10] (Read) Returning value v=1 to client
[client2] Received ReadResponse for key=18 value="Beta" version=1
[client2] Sending response to manager: READ 18 success=true message=Value="Beta" version=1
[TestManager] Received client response: READ 18 success=true
[TestManager] Client request batch completed.
[Main] 
[Main] Press ENTER to continue...
[Main] 
[TestManager] 

[TestManager] === PRINTING STORE CONTENTS OF ALL ACTIVE NODES ===
[TestManager] === COMPLETED PRINTING STORE CONTENTS OF ALL ACTIVE NODES ===
[TestManager] Node 0:
[TestManager]   Key: 65 -> Value: "Third" (v3)
[TestManager] Node 10:
[TestManager]   Key: 65 -> Value: "Third" (v3)
[TestManager] Node 20:
[TestManager]   Key: 18 -> Value: "Beta" (v1)
[TestManager] Node 27:
[TestManager]   Key: 25 -> Value: "HelloWorld" (v1)
[TestManager] Node 40:
[TestManager]   Key: 18 -> Value: "Beta" (v1)
[TestManager]   Key: 25 -> Value: "HelloWorld" (v1)
[TestManager] Node 70:
[TestManager]   Key: 65 -> Value: "Third" (v3)
[TestManager]   Key: 25 -> Value: "HelloWorld" (v1)
[TestManager] 

[TestManager] =====================
[TestManager] === SYSTEM STATUS ===
[TestManager] Active nodes: 6
[TestManager] Crashed nodes: 0
[TestManager] Active node IDs: [0, 20, 27, 40, 10, 70]
[TestManager] Client list: 3
[TestManager] Clients: [client0, client1, client2]
[TestManager] =====================
[Main] 
[Main] ============================================================
[Main] ====   Node Action During Request test completed.       ====
[Main] Summary:
[Main]   - Node actions during pending requests handled correctly.
[Main]   - Data integrity and system stability maintained.
[Main] ============================================================

[Main] 
[Main] Press ENTER to continue...
[Main] 
[Main] 
[Main] ============================================================
[Main] ====         Starting Ask to Crashed Node test         ====
[Main] ============================================================
[Main] Crashing node27...
[TestManager] CRASH completed: Node 27
[Node 27] Crashing node
[TestManager] CRASH completed: Node 27 crashed
[TestManager] Node action batch completed.
[Main] 
[client0] Updated node list. Active targets: 5
[Main] Press ENTER to continue...
[Main] 
[client2] Updated node list. Active targets: 5
[client1] Updated node list. Active targets: 5
[Main] Client0 writing key=30, value='Epsilon' asking crashed node27...
[client0] Sending WriteRequest key=30, value="Epsilon" to Node27
[client0] Sending response to manager: WRITE 30 Epsilon success=false message=Timeout waiting for response. Node may be unresponsive (crashed).
[TestManager] Received client response: WRITE 30 Epsilon success=false
[TestManager] Client request batch completed.
[Main] 
[Main] Press ENTER to continue...
[Main] 
[Main] Crashing node40...
[TestManager] CRASH completed: Node 40
[Node 40] Crashing node
[TestManager] CRASH completed: Node 40 crashed
[TestManager] Node action batch completed.
[client0] Updated node list. Active targets: 4
[client1] Updated node list. Active targets: 4
[client2] Updated node list. Active targets: 4
[Main] 
[Main] Press ENTER to continue...
[Main] 
[Main] Client1 reading key=30 asking crashed node40...
[client1] Sending ReadRequest key=30 to Node40
[client1] Sending response to manager: READ 30 success=false message=Timeout waiting for response. Node may be unresponsive (crashed).
[TestManager] Received client response: READ 30 success=false
[TestManager] Client request batch completed.
[Main] 
[Main] Press ENTER to continue...
[Main] 
[TestManager] 

[TestManager] === PRINTING STORE CONTENTS OF ALL ACTIVE NODES ===
[TestManager] === COMPLETED PRINTING STORE CONTENTS OF ALL ACTIVE NODES ===
[TestManager] Node 0:
[TestManager]   Key: 65 -> Value: "Third" (v3)
[TestManager] Node 10:
[TestManager]   Key: 65 -> Value: "Third" (v3)
[TestManager] Node 20:
[TestManager]   Key: 18 -> Value: "Beta" (v1)
[TestManager] Node 70:
[TestManager]   Key: 65 -> Value: "Third" (v3)
[TestManager]   Key: 25 -> Value: "HelloWorld" (v1)
[TestManager] 

[TestManager] =====================
[TestManager] === SYSTEM STATUS ===
[TestManager] Active nodes: 4
[TestManager] Crashed nodes: 2
[TestManager] Active node IDs: [0, 20, 10, 70]
[TestManager] Crashed node IDs: [27, 40]
[TestManager] Client list: 3
[TestManager] Clients: [client0, client1, client2]
[TestManager] =====================
[Main] 
[Main] ============================================================
[Main] ====       Ask to Crashed Node test completed.        ====
[Main] Summary:
[Main]   - System handled requests to crashed nodes gracefully.
[Main]   - Stability and data integrity maintained.
[Main] ============================================================

[Main] 
[Main] Press ENTER to continue...
[Main] 
[Main] 
[Main] ============================================================
[Main] ====          Starting Failing JOIN test               ====
[Main] ============================================================
[Main] Simulating failing JOIN for node25 (should fail due to the crash of its successor node, node27)...
[TestManager] JOIN completed: Node 25 joined the system
[Node 25] Timeout armed for JOINING: waiting bootstrap peer response for JOIN
[Node 25] JOIN: requesting items from 27
[Node 25] Timeout armed for JOINING: waiting data transfer from successor 27
[TestManager] Node action batch completed.
[Main] 
[Main] Press ENTER to continue...
[Main] 
[TestManager] 

[TestManager] === PRINTING STORE CONTENTS OF ALL ACTIVE NODES ===
[TestManager] === COMPLETED PRINTING STORE CONTENTS OF ALL ACTIVE NODES ===
[TestManager] Node 0:
[TestManager]   Key: 65 -> Value: "Third" (v3)
[TestManager] Node 10:
[TestManager]   Key: 65 -> Value: "Third" (v3)
[TestManager] Node 20:
[TestManager]   Key: 18 -> Value: "Beta" (v1)
[TestManager] Node 70:
[TestManager]   Key: 65 -> Value: "Third" (v3)
[TestManager]   Key: 25 -> Value: "HelloWorld" (v1)
[TestManager] 

[TestManager] =====================
[TestManager] === SYSTEM STATUS ===
[TestManager] Active nodes: 4
[TestManager] Crashed nodes: 2
[TestManager] Active node IDs: [0, 20, 10, 70]
[TestManager] Crashed node IDs: [27, 40]
[TestManager] Client list: 3
[TestManager] Clients: [client0, client1, client2]
[TestManager] =====================
[Main] 
============================================================
[Main] ====            Failing JOIN test completed.           ====
[Main] Summary:
[Main]   - Failing JOIN operation handled correctly.
[Main]   - System state is stable and ready for further tests.
[Main] ============================================================

[Main] 
[Main] Press ENTER to continue...
[Main] 
[Main] 
[Main] ============================================================
[Main] ====         Starting Failing RECOVER test             ====
[Main] ============================================================
[Main] Simulating failing RECOVER for node40 (should fail due to the crash of its predecessor node, node27)...
[TestManager] RECOVER completed: Node 40
[Node 40] Starting RECOVERY via testManager
[Node 40] Timeout armed for RECOVERING: waiting bootstrap peer response for RECOVER
[Node 40] RECOVER: requesting items from successor 70
[Node 40] RECOVER: requesting items from predecessor 27
[Node 40] Timeout armed for RECOVERING: waiting data transfer from successor 70, predecessor 27
[Node 70] IDLE: sending 1 items to 40
[Node 40] Timeout armed for RECOVERING: waiting data transfer from predecessor 27
[Node 40] RECOVER: waiting for more responses (1/2)
[TestManager] Node action batch completed.
[Main] 
[Main] Press ENTER to continue...
[Main] 
[TestManager] 

[TestManager] === PRINTING STORE CONTENTS OF ALL ACTIVE NODES ===
[TestManager] === COMPLETED PRINTING STORE CONTENTS OF ALL ACTIVE NODES ===
[TestManager] Node 0:
[TestManager]   Key: 65 -> Value: "Third" (v3)
[TestManager] Node 10:
[TestManager]   Key: 65 -> Value: "Third" (v3)
[TestManager] Node 20:
[TestManager]   Key: 18 -> Value: "Beta" (v1)
[TestManager] Node 70:
[TestManager]   Key: 65 -> Value: "Third" (v3)
[TestManager]   Key: 25 -> Value: "HelloWorld" (v1)
[TestManager] 

[TestManager] =====================
[TestManager] === SYSTEM STATUS ===
[TestManager] Active nodes: 4
[TestManager] Crashed nodes: 2
[TestManager] Active node IDs: [0, 20, 10, 70]
[TestManager] Crashed node IDs: [27, 40]
[TestManager] Client list: 3
[TestManager] Clients: [client0, client1, client2]
[TestManager] =====================
[Main] 
============================================================
[Main] ====           Failing RECOVER test completed.        ====
[Main] Summary:
[Main]   - Failing RECOVER operation handled correctly.
[Main]   - System state is stable and ready for further tests.
[Main] ============================================================

[Main] 
[Main] Press ENTER to continue...
[Main] 
[Main] All automated scenarios completed. Terminate the program when ready.
